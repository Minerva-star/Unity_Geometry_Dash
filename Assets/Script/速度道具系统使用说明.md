# 速度道具系统使用说明

## 系统概述

这是一个简单的速度道具系统，玩家碰撞道具后获得临时的加速或减速效果。

## 核心组件

### 1. SpeedItem.cs (新增)
- 速度道具脚本
- 玩家碰撞后自动收集
- 支持旋转、音效、粒子效果

### 2. ItemSpawner.cs (新增)
- 道具生成器
- 自动生成道具
- 支持手动生成

### 3. PlayerBehavior.cs (已修改)
- 添加了道具碰撞检测
- 保留了原有的速度修改器系统

## 使用方法

### 方法一：手动创建道具

1. **创建道具对象**
   ```
   1. 在场景中创建空GameObject
   2. 添加SpriteRenderer组件
   3. 添加SpeedItem脚本
   4. 设置标签为"SpeedItem"
   ```

2. **配置道具参数**
   ```
   - Item Name: 道具名称
   - Speed Multiplier: 速度倍率 (2.0=双倍速度, 0.5=一半速度)
   - Duration: 持续时间(秒)
   - Item Color: 道具颜色
   - Rotate Item: 是否旋转
   - Collect Sound: 收集音效
   - Collect Particle: 收集粒子效果
   ```

### 方法二：使用道具生成器

1. **设置生成器**
   ```
   1. 创建空GameObject
   2. 添加ItemSpawner脚本
   3. 配置生成参数
   ```

2. **配置生成参数**
   ```
   - Spawn Interval: 生成间隔(秒)
   - Auto Spawn: 是否自动生成
   - Speed Up Multiplier: 加速倍率
   - Speed Up Duration: 加速持续时间
   - Speed Down Multiplier: 减速倍率
   - Speed Down Duration: 减速持续时间
   ```

### 方法三：通过代码创建

```csharp
// 创建加速道具
CreateSpeedItem("加速道具", 2f, 3f, Color.green);

// 创建减速道具
CreateSpeedItem("减速道具", 0.5f, 2f, Color.red);
```

## 测试方法

### 1. 键盘快捷键
- **S键**: 生成加速道具
- **D键**: 生成减速道具
- **1键**: 添加2x加速效果(5秒)
- **2键**: 添加0.5x减速效果(3秒)
- **3键**: 清除所有效果

### 2. 自动生成
- 道具生成器会自动在玩家前方生成道具
- 每5秒生成一个随机道具

### 3. 手动测试
- 在场景中放置道具对象
- 让玩家碰撞道具测试效果

## 配置示例

### 加速道具配置
```
Item Name: "加速道具"
Speed Multiplier: 2.0
Duration: 3.0
Item Color: Green
Rotate Item: true
```

### 减速道具配置
```
Item Name: "减速道具"
Speed Multiplier: 0.5
Duration: 2.0
Item Color: Red
Rotate Item: true
```

### 道具生成器配置
```
Spawn Interval: 5.0
Auto Spawn: true
Speed Up Multiplier: 2.0
Speed Up Duration: 3.0
Speed Down Multiplier: 0.5
Speed Down Duration: 2.0
```

## 功能特性

### 1. 简单直接
- 碰撞即收集
- 自动应用速度效果
- 道具自动销毁

### 2. 视觉效果
- 道具旋转动画
- 收集时颜色变化
- 可选的粒子效果

### 3. 音效支持
- 收集音效
- 自动播放

### 4. 时间控制
- 精确的持续时间
- 自动移除过期效果

## 注意事项

1. **标签设置**: 确保道具设置了"SpeedItem"标签
2. **碰撞器设置**: 道具的Collider2D必须设置为isTrigger = true
3. **玩家标签**: 确保玩家设置了"Player"标签
4. **性能考虑**: 大量道具可能影响性能

## 扩展功能

### 1. 添加道具类型
```csharp
public enum ItemType
{
    SpeedUp,    // 加速
    SpeedDown,  // 减速
    JumpBoost,  // 跳跃增强
    Shield      // 护盾
}
```

### 2. 添加道具稀有度
```csharp
public enum ItemRarity
{
    Common,     // 普通
    Rare,       // 稀有
    Epic,       // 史诗
    Legendary   // 传说
}
```

### 3. 添加道具组合效果
```csharp
public void ApplyComboEffect()
{
    // 连续收集多个道具时的特殊效果
}
```

## 故障排除

### 问题1：道具不生效
- 检查道具标签是否为"SpeedItem"
- 检查玩家标签是否为"Player"
- 检查碰撞器设置

### 问题2：道具不生成
- 检查ItemSpawner配置
- 检查生成点设置
- 查看控制台错误信息

### 问题3：速度效果异常
- 检查speedMultiplier值
- 检查duration设置
- 查看PlayerBehavior的速度管理

## 版本历史

- v1.0: 基础速度道具系统
- 支持加速和减速道具
- 支持自动生成
- 支持视觉效果和音效
- 支持时间控制 